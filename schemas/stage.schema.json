{
    "$schema": "http://json-schema.org/draft-07/schema",
    "title": "FNF Modish Stage",
    "description": "A stage definition file for the Friday Night Funkin' mod loader Modish.",
    "type": "object",
    "properties": {
        "sprites": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [ "sprite", "player", "girlfriend", "opponent" ],
                        "description": "The type of sprite to use. Used to specify where the characters are on the stage.",
                        "default": "sprite"
                    },
                    "position": {
                        "type": "array",
                        "description": "The position of this sprite on the stage.",
                        "items": {
                            "type": "number"
                        },
                        "minItems": 2,
                        "maxItems": 2
                    },
                    "scrollFactor": {
                        "type": "array",
                        "description": "How fast this sprite moves in response to camera movements. Lower values make the sprite appear distant.",
                        "default": [ 1.0, 1.0 ],
                        "items": {
                            "type": "number"
                        },
                        "minItems": 2,
                        "maxItems": 2
                    },
                    "scale": {
                        "type": "array",
                        "default": [ 1.0, 1.0 ],
                        "items": {
                            "type": "number"
                        },
                        "minItems": 2,
                        "maxItems": 2
                    },
                    "id": {
                        "type": [ "string", "null" ],
                        "description": "The ID of this sprite. Scripts can use this ID to interact with the sprite.",
                        "pattern": "^[0-9a-z-]+$",
                        "default": null
                    },
                    "graphic": {
                        "type": "string",
                        "description": "The filename of the graphic assets used by this sprite.",
                        "pattern": "^[0-9a-z/-]+$"
                    },
                    "group": {
                        "type": [ "string", "null" ],
                        "description": "The group to put this sprite in; used by scripts to refer to multiple sprites at once.",
                        "pattern": "^[0-9a-z-]+$",
                        "default": null
                    },
                    "distraction": {
                        "type": "boolean",
                        "description": "Whether or not this sprite is disabled when distractions are off.",
                        "default": false
                    },
                    "antialiasing": {
                        "type": "boolean",
                        "default": false
                    },
                    "alpha": {
                        "type": "number",
                        "description": "The opacity of the sprite.",
                        "default": 1.0,
                        "minimum": 0.0,
                        "maximum": 1.0
                    },
                    "visible": {
                        "type": "boolean",
                        "default": true
                    },
                    "animated": {
                        "type": "boolean",
                        "description": "Whether or not this sprite is animated. If it is animated, frames will be loaded from a texture atlas file.",
                        "const": true
                    },
                    "cameraOffset": {
                        "type": "array",
                        "description": "Only for characters. Offsets the camera's position when it is focused on this character.",
                        "default": [ 0.0, 0.0 ],
                        "items": {
                            "type": "number"
                        },
                        "minItems": 2,
                        "maxItems": 2
                    }
                },
                "required": [ "position" ],
                "dependencies": {
                    "animations": [ "animated" ],
                    "startingAnimation": [ "animated", "animations" ],
                    "cameraOffset": {
                        "properties": {
                            "type": {
                                "enum": [ "player", "girlfriend", "opponent" ]
                            }
                        },
                        "required": [ "type" ]
                    }
                },
                "if": {
                    "properties": {
                        "type": {
                            "const": "sprite"
                        }
                    }
                },
                "then": {
                    "required": [ "graphic" ]
                },
                "allOf": [
                    {
                        "$ref": "animation-set.schema.json"
                    }
                ]
            }
        },
        "zoom": {
            "type": "number",
            "description": "How far the camera is zoomed in on this stage.",
            "default": 1.0
        },
        "$schema": {
            "$comment": "Allow specifying the schema location using VS Code's '$schema' property without breaking validation."
        }
    },
    "additionalProperties": false
}
